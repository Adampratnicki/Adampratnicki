function t_animateSbs__wrapAnimatedAtomEls(){var wrappingEls;$("[data-animate-sbs-event]").each((function(){var el_atom=$(this).find(".tn-atom");el_atom.css("backface-visibility","hidden"),0==el_atom.parents(".tn-atom__sbs-anim-wrapper").length&&t_animateSbs__getOptsPublishMode($(this))&&el_atom.wrap("<div class='tn-atom__sbs-anim-wrapper' style='display:table; width:inherit; height:inherit;'></div>")}))}function t_animateSbs__initAllRes(){var opts={els:$("[data-animate-sbs-event]"),scrollTop:window.pageYOffset,stop:!1,needUpdate:!0};if(opts.mode=void 0!==$(opts.els[0]).attr("data-field-sbsevent-value")?"edit":"publish",0!=opts.els.length){t_animateSbs__cashElsData(opts);var animStuff=t_animateSbs__generateKeyframes(opts),resizeEnd,hasScrollAnim;""!=animStuff&&$("head").append('<style class="sbs-anim-keyframes">'+animStuff+"</style>"),"y"!==window.lazy&&"yes"!==$("#allrecords").attr("data-tilda-lazy")||t_animateSbs__onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()})),$(window).resize(animationUpdate),$(".t396").bind("displayChanged",animationUpdate),t_animateSbs__triggerTimeAnim(opts),$("[data-animate-sbs-event=scroll]").length>0&&(t_animateSbs__triggerScrollAnim(opts),t_animateSbs__checkFrame(opts)),$(window).on("load",(function(){t_animateSbs__rereadElsValues(opts)})),setTimeout((function(){t_animateSbs__rereadElsValues(opts)}),3e3)}function animationUpdate(){clearTimeout(resizeEnd),resizeEnd=setTimeout((function(){opts.stop=!1,t_animateSbs__cashElsData(opts),t_animateSbs__triggerScrollAnim(opts);var animStuff=t_animateSbs__generateKeyframes(opts),oldStyle=$("head").find("style.sbs-anim-keyframes").text();""!=animStuff&&animStuff!==oldStyle&&($("head").find("style.sbs-anim-keyframes").remove(),$("head").append('<style class="sbs-anim-keyframes">'+animStuff+"</style>"))}),500)}}function t_animateSbs__rereadElsValues(opts){for(var i=0;i<opts.els.length;i++){var el=opts.els[i];t_animateSbs__cashElsTopOffset(el,opts),"scroll"==el.changeType&&t_animateSbs__updateStepsStartValues(el)}}function t_animateSbs__checkFrame(opts){opts.needUpdate=t_animateSbs__checkChanges(opts),opts.needUpdate&&!1===opts.stop&&t_animateSbs__triggerScrollAnim(opts),requestAnimationFrame((function(){t_animateSbs__checkFrame(opts)}))}function t_animateSbs__checkChanges(opts){var oldTop=opts.scrollTop,scrollChanges;return opts.scrollTop=window.pageYOffset,oldTop!=opts.scrollTop&&!1===opts.stop}function t_animateSbs__triggerScrollAnim(opts){for(var els=opts.els,i=0;i<els.length;i++){var el=els[i];if("time"!==el.changeType){var elState={opacity:1,blur:0,fix:!1,fix__shiftY:0,translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0};t_animateSbs__triggerScrollAnim__checkElSteps(opts,el,elState),t_animateSbs__triggerScrollAnim__changeEl(el,elState,opts)}}}function t_animateSbs__triggerScrollAnim__checkElSteps(opts,el,elState){for(var j=0;j<el.steps.length;j++){var curStep=el.steps[j];curStep.index=j;var trigger=opts.scrollTop+el.triggerOffset,isAfterStart=trigger>=curStep.start,isBeforeStart=trigger<curStep.start,isAfterEnd=curStep.end<=trigger,isBeforeEnd=curStep.end>trigger;if(isAfterStart&&isBeforeEnd){curStep.state="started",el.wrapperEl.css("will-change","transform");var progress=trigger-curStep.start,percentage=0==curStep.dist?1:progress/curStep.dist;elState.prevUnfixedDist=curStep.prevUnfixedDist,t_animateSbs__triggerScrollAnim__calcStyle(el,elState,curStep,percentage)}isAfterEnd&&(curStep.state="finished",el.wrapperEl.css("will-change",""),t_animateSbs__triggerScrollAnim__calcStyle(el,elState,curStep,1)),!isBeforeStart||"started"!=curStep.state&&"finished"!=curStep.state||(curStep.state="unactive",el.wrapperEl.css("will-change",""),t_animateSbs__triggerScrollAnim__calcStyle(el,elState,curStep,0))}el.steps[1]&&"unactive"===el.steps[1].state&&0===el.steps[1].styles.opacity&&0===el.steps[1].dist&&(elState.opacity=0)}function t_animateSbs__generateKeyframes(opts){for(var animStuff="",i=0;i<opts.els.length;i++){var el=opts.els[i];if("time"===el.changeType){var kf_opts={timeDuration:0},keyframes=[];t_animateSbs__generateKeyframes__combineObjects(el.steps,keyframes,kf_opts),t_animateSbs__generateKeyframes__correctFrames(keyframes),t_animateSbs__generateKeyframes__countPercent(keyframes,kf_opts),t_animateSbs__generateKeyframes__correctOpacityOnFirstStep(el,keyframes);var keyframes_str=t_animateSbs__generateKeyframes__getTxtStyles(keyframes);kf_opts.timeDuration/=1e3,""!==keyframes_str&&(animStuff+=t_animateSbs__generateKeyframes__getFinalCss(el,kf_opts,keyframes_str),"loop"===el.loop||"noreverse"===el.loop||"hover"!==el.animType&&"click"!==el.animType||(animStuff+=t_animateSbs__generateKeyframes__getReverseAnim(el)))}}return animStuff}function t_animateSbs__generateKeyframes__getReverseAnim(el){var el_id=el.getAttribute("data-elem-id"),rec_id,animStuff="";return animStuff+="#"+$(el).parents(".t-rec").attr("id")+" ",animStuff+='[data-elem-id="'+el_id+'"].t-sbs-anim_started.t-sbs-anim_reversed .tn-atom__sbs-anim-wrapper',animStuff+="{\n-webkit-animation-direction: reverse;\nanimation-direction: reverse;\n}\n\n"}function t_animateSbs__generateKeyframes__getFinalCss(el,kf_opts,keyframes_str){var animStuff="",el_id=$(el).attr("data-elem-id"),el_animName="sbs-anim-"+el_id,rec_id=$(el).parents(".t-rec").attr("id"),duration,is_safari;if(el.timeDuration=kf_opts.timeDuration,void 0!==rec_id&&(animStuff+="#"+rec_id+" ",el_animName="sbs-anim-"+rec_id+"-"+el_id,!0===kf_opts.reverse&&(el_animName+="_reverse")),!0===kf_opts.hover)var selector='[data-elem-id="'+el_id+'"].t-sbs-anim_started:hover .tn-atom__sbs-anim-wrapper';else var selector='[data-elem-id="'+el_id+'"].t-sbs-anim_started .tn-atom__sbs-anim-wrapper';return animStuff+=selector+" {\nanimation: "+el_animName+" "+(0===kf_opts.timeDuration?1e-5:kf_opts.timeDuration)+"s","loop"===el.loop&&(animStuff+=" infinite"),animStuff+=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?" linear 0.000001s":" linear","loop"!==el.loop&&(animStuff+=" forwards"),animStuff+=";\nbackface-visibility: hidden;\n}\n\n@keyframes "+el_animName+" {\n"+keyframes_str+"}\n\n"}function t_animateSbs__generateKeyframes__combineObjects(steps,keyframes,kf_opts){for(var j=0;j<steps.length;j++){var step=steps[j],keyframe={};keyframe.styles=step.styles,keyframe.time=1*step.time,j!==steps.length-1&&(keyframe.ease=steps[j+1].ease),keyframes.push(keyframe),kf_opts.timeDuration+=keyframe.time}}function t_animateSbs__generateKeyframes__correctFrames(keyframes){for(var k=0;k<keyframes.length;k++){var keyframe=keyframes[k],isLast=k===keyframes.length-1,isFirst=0===k;if(!isLast)var nextKeyframe=keyframes[k+1];if(!isFirst)var prevKeyframe=keyframes[k-1];for(var style in keyframe.styles)isFirst||style in prevKeyframe.styles||t_animateSbs__generateKeyframes__addStyleToKeyframe(keyframe,prevKeyframe,style,0),isLast||(style in nextKeyframe.styles?"moveX"!==style&&"moveY"!==style&&"rotate"!==style||t_animateSbs__generateKeyframes__recalculateValue(keyframe,nextKeyframe,style):t_animateSbs__generateKeyframes__addStyleToKeyframe(keyframe,nextKeyframe,style,"1"))}}function t_animateSbs__generateKeyframes__addStyleToKeyframe(keyframe,changingKeyFrame,style,state){"blur"!==style&&"rotate"!==style&&"moveX"!==style&&"moveY"!==style||(changingKeyFrame.styles[style]=0===state?0:keyframe.styles[style]),"opacity"!==style&&"scaleX"!==style&&"scaleY"!==style||(changingKeyFrame.styles[style]=0===state?1:keyframe.styles[style])}function t_animateSbs__generateKeyframes__recalculateValue(keyframe,nextKeyframe,style){"rotate"===style&&(nextKeyframe.styles.rotate=1*keyframe.styles.rotate+1*nextKeyframe.styles.rotate),"moveX"===style&&(nextKeyframe.styles.moveX=1*keyframe.styles.moveX+1*nextKeyframe.styles.moveX),"moveY"===style&&(nextKeyframe.styles.moveY=1*keyframe.styles.moveY+1*nextKeyframe.styles.moveY)}function t_animateSbs__generateKeyframes__countPercent(keyframes,kf_opts){for(var j=0;j<keyframes.length;j++){var keyframe=keyframes[j];if(0===j)keyframe.percent=0==kf_opts.timeDuration?0:Math.round(keyframe.time/kf_opts.timeDuration*100);else if(j===keyframes.length-1)keyframe.percent=100;else{var prevPercent=keyframes[j-1].percent;keyframe.percent=0==kf_opts.timeDuration?0:Math.round(keyframe.time/kf_opts.timeDuration*100+prevPercent),keyframe.percent==prevPercent&&(keyframe.percent+=1),keyframe.percent>100&&(keyframe.percent=99)}}}function t_animateSbs__generateKeyframes__correctOpacityOnFirstStep(el,keyframes){var firstKeyframe=keyframes[1];void 0!==firstKeyframe&&0===firstKeyframe.time&&0===firstKeyframe.styles.opacity&&($(el).find(".tn-atom__sbs-anim-wrapper").css("opacity",0),keyframes[0].styles.opacity=0)}function t_animateSbs__generateKeyframes__getTxtStyles(keyframes){for(var keyframes_str="",j=0;j<keyframes.length;j++)void 0===keyframes[j].changes&&(keyframes[j].changes=t_animateSbs__generateKeyframes__getFrameChanges(keyframes[j])),keyframes_str+=keyframes[j].percent+"% {"+keyframes[j].changes+"}\n";return keyframes_str}function t_animateSbs__generateKeyframes__getFrameChanges(keyframe){var stepChanges="",transformChanges="",scaleChanges={x:1,y:1,changed:!1};for(var style in keyframe.styles)"opacity"===style&&(stepChanges+="opacity:"+keyframe.styles.opacity+";"),"scaleX"===style&&(scaleChanges.x=keyframe.styles.scaleX,scaleChanges.changed=!0),"scaleY"===style&&(scaleChanges.y=keyframe.styles.scaleY,scaleChanges.changed=!0),"moveX"===style&&(transformChanges+="translateX("+keyframe.styles.moveX+"px)"),"moveY"===style&&(transformChanges+="translateY("+keyframe.styles.moveY+"px)"),"rotate"==style&&(transformChanges+="rotate("+keyframe.styles.rotate+"deg)");if(!0===scaleChanges.changed&&(transformChanges+="scale("+scaleChanges.x+","+scaleChanges.y+")"),""!=transformChanges&&(stepChanges+="transform:"+transformChanges+";"),void 0!==keyframe.ease)switch(stepChanges+="animation-timing-function:",keyframe.ease){case"easeIn":stepChanges+="ease-in;";break;case"easeOut":stepChanges+="ease-out;";break;case"easeInOut":stepChanges+="ease-in-out;";break;case"bounceFin":stepChanges+="cubic-bezier(0.34,1.61,0.7,1);";break;default:stepChanges+="linear;"}return stepChanges}function t_animateSbs__generateKeyframes__reverseObj(keyframes){for(var reversed=[],i=keyframes.length-1;i>=0;i--){var frame={percent:100-keyframes[i].percent,changes:keyframes[i].changes};reversed.push(frame)}return reversed}function t_animateSbs__triggerScrollAnim__changeEl(el,elState){if(!0===elState.fix&&"fixed"!=el.wrapperEl.css("position")){var top=el.triggerOffset-elState.prevUnfixedDist;el.wrapperEl.css({top:top+"px",position:"fixed"}),el.zIndexVal&&el.wrapperEl.css("z-index",el.zIndexVal)}!1===elState.fix&&"fixed"==el.wrapperEl.css("position")&&(el.wrapperEl.css({position:"",top:"","z-index":""}),el.zIndexVal&&$(el).css("z-index",el.zIndexVal)),null!==elState.opacity&&el.wrapperEl.css("opacity",elState.opacity);var trVal="";elState.translateX&&(trVal+="translateX("+elState.translateX+"px)"),0===elState.translateY&&0===elState.fix__shiftY||(trVal+="translateY("+(elState.translateY+elState.fix__shiftY)+"px)"),1===elState.scaleX&&1===elState.scaleY||(trVal+="scale("+elState.scaleX+","+elState.scaleY+")"),0!==elState.rotate&&(trVal+="rotate("+elState.rotate+"deg)"),el.wrapperEl.css("transform",trVal),""!==trVal?el.wrapperEl.css("transform",trVal):el.wrapperEl.css("transform","scale(1)")}function t_animateSbs__triggerScrollAnim__calcStyle(el,elState,curStep,percentage){if(!0===curStep.styles.fix&&"started"==curStep.state&&(elState.fix=!0,elState.fix__shiftY=0),!0===curStep.styles.fix&&"finished"==curStep.state&&(elState.fix=!1,elState.fix__shiftY+=1*curStep.dist),!0===curStep.styles.fix&&"unactive"==curStep.state){if(curStep.index>0&&!0===elState.fix)return;elState.fix=!1}elState.opacity+=percentage*(curStep.styles.opacity-elState.opacity),elState.blur+=percentage*(curStep.styles.blur-elState.blur),elState.translateX+=percentage*curStep.styles.moveX,elState.translateY+=percentage*curStep.styles.moveY,elState.scaleX+=percentage*(curStep.styles.scaleX-elState.scaleX),elState.scaleY+=percentage*(curStep.styles.scaleY-elState.scaleY),elState.rotate+=percentage*curStep.styles.rotate}function t_animateSbs__getOptsPublishMode(el){var opts,width=$(window).width(),$el=$(el);return width>=1200?$el.attr("data-animate-sbs-opts"):"y"==$el.attr("data-animate-mobile")?width>=960?((opts=$el.attr("data-animate-sbs-opts-res-960"))||(opts=$el.attr("data-animate-sbs-opts")),opts):width>=640?((opts=$el.attr("data-animate-sbs-opts-res-640"))||(opts=$el.attr("data-animate-sbs-opts-res-960")),opts||(opts=$el.attr("data-animate-sbs-opts")),opts):width>=480?((opts=$el.attr("data-animate-sbs-opts-res-480"))||(opts=$el.attr("data-animate-sbs-opts-res-640")),opts||(opts=$el.attr("data-animate-sbs-opts-res-960")),opts||(opts=$el.attr("data-animate-sbs-opts")),opts):width>=320?((opts=$el.attr("data-animate-sbs-opts-res-320"))||(opts=$el.attr("data-animate-sbs-opts-res-480")),opts||(opts=$el.attr("data-animate-sbs-opts-res-640")),opts||(opts=$el.attr("data-animate-sbs-opts-res-960")),opts||(opts=$el.attr("data-animate-sbs-opts")),opts):void 0:void 0}function t_animateSbs__getOptsEditMode(el){var opts,width=window.tn.curResolution,$el=$(el);return width>=1200?$el.attr("data-field-sbsopts-value"):width>=960?((opts=$el.attr("data-field-sbsopts-res-960-value"))||(opts=$el.attr("data-field-sbsopts-value")),opts):width>=640?((opts=$el.attr("data-field-sbsopts-res-640-value"))||(opts=$el.attr("data-field-sbsopts-res-960-value")),opts||(opts=$el.attr("data-field-sbsopts-value")),opts):width>=480?((opts=$el.attr("data-field-sbsopts-res-480-value"))||(opts=$el.attr("data-field-sbsopts-res-640-value")),opts||(opts=$el.attr("data-field-sbsopts-res-960-value")),opts||(opts=$el.attr("data-field-sbsopts-value")),opts):width>=320?((opts=$el.attr("data-field-sbsopts-res-320-value"))||(opts=$el.attr("data-field-sbsopts-res-480-value")),opts||(opts=$el.attr("data-field-sbsopts-res-640-value")),opts||(opts=$el.attr("data-field-sbsopts-res-960-value")),opts||(opts=$el.attr("data-field-sbsopts-value")),opts):void 0}function t_animateSbs__getTriggetElems(el){var els,width=$(window).width(),$el=$(el);return width>=1200?$el.attr("data-animate-sbs-trgels"):width>=960?((els=$el.attr("data-animate-sbs-trgels-res-960"))||(els=$el.attr("data-animate-sbs-trgels")),els):width>=640?((els=$el.attr("data-animate-sbs-trgels-res-640"))||(els=$el.attr("data-animate-sbs-trgels-res-960")),els||(els=$el.attr("data-animate-sbs-trgels")),els):width>=480?((els=$el.attr("data-animate-sbs-trgels-res-480"))||(els=$el.attr("data-animate-sbs-trgels-res-640")),els||(els=$el.attr("data-animate-sbs-trgels-res-960")),els||(els=$el.attr("data-animate-sbs-trgels")),els):width>=320?((els=$el.attr("data-animate-sbs-trgels-res-320"))||(els=$el.attr("data-animate-sbs-trgels-res-480")),els||(els=$el.attr("data-animate-sbs-trgels-res-640")),els||(els=$el.attr("data-animate-sbs-trgels-res-960")),els||(els=$el.attr("data-animate-sbs-trgels")),els):void 0}function t_animateSbs__cashElsData(opts){var els=opts.els;opts.triggerElemsAttrName="edit"===opts.mode?"data-field-sbstrgels-value":"data-animate-sbs-trgels";for(var i=0;i<els.length;i++){var el=els[i],str_opts;if(el.state="unactive",el.animType="edit"===opts.mode?$(el).attr("data-field-sbsevent-value"):$(el).attr("data-animate-sbs-event"),el.changeType="scroll"===el.animType?"scroll":"time",el.trigger="edit"===opts.mode?$(el).attr("data-field-sbstrg-value"):$(el).attr("data-animate-sbs-trg"),el.trigger=void 0===el.trigger?1:el.trigger,el.triggerElems=t_animateSbs__getTriggetElems(el),el.wrapperEl=$(el).find(".tn-atom__sbs-anim-wrapper"),el.steps=[],void 0!==(str_opts="edit"===opts.mode?t_animateSbs__getOptsEditMode(el):t_animateSbs__getOptsPublishMode(el))){-1!=str_opts.indexOf("fixed")&&(el.zIndexVal=window.getComputedStyle(el).getPropertyValue("z-index")),str_opts=str_opts.replace(/'/g,'"');var obj_steps=JSON.parse(str_opts);t_animateSbs__addDelayStepsToStepsArr(obj_steps),el.loop="edit"===opts.mode?$(el).attr("data-field-sbsloop-value"):$(el).attr("data-animate-sbs-loop"),t_animateSbs__cashElsTopOffset(el,opts);for(var totalUnfixedDist=0,j=0;j<obj_steps.length;j++){var curStep={state:"unactive"};curStep.styles=t_animateSbs__getStylesObj(obj_steps[j]),"scroll"==el.changeType?(curStep.prevUnfixedDist=totalUnfixedDist,curStep.dist=obj_steps[j].di,!1===curStep.styles.fix&&(totalUnfixedDist+=Number(curStep.dist)),curStep.start=0==j?el.topOffset:el.steps[j-1].end,curStep.end=curStep.start+1*curStep.dist):(curStep.time=obj_steps[j].ti,curStep.ease=obj_steps[j].ea),el.steps.push(curStep)}t_animateSbs__updateInfoOnImgLoad(el,opts),t_animateSbs__recalcStepsStylesDiff(el.steps)}}}function t_animateSbs__updateInfoOnImgLoad(el,opts){$(el).find("img").on("load",(function(){t_animateSbs__cashElsTopOffset(el,opts),"scroll"==el.changeType&&t_animateSbs__updateStepsStartValues(el)})).each((function(){this.complete&&$(this).on("load",(function(){}))}))}function t_animateSbs__updateStepsStartValues(el){for(var j=0;j<el.steps.length;j++){var curStep=el.steps[j];curStep.start=0==j?el.topOffset:el.steps[j-1].end,curStep.end=curStep.start+1*curStep.dist}}function t_animateSbs__cashElsTopOffset(el,opts){if(("scroll"==el.animType||"intoview"==el.animType||"blockintoview"==el.animType)&&"publish"===opts.mode){var elTopPos=1*$(el).css("top").replace("px",""),elRecParent=$(el).parents(".r"),recTopOffset=elRecParent.offset().top+1*elRecParent.css("padding-top").replace("px","");el.blockTopOffset=recTopOffset,el.topOffset=recTopOffset+elTopPos,t_animateSbs__getElTrigger(el)}}function t_animateSbs__addDelayStepsToStepsArr(obj_steps){for(var j=0;j<obj_steps.length;j++){var step=obj_steps[j];if(void 0!==step.dd&&""!==step.dd&&0!=step.dd||void 0!==step.dt&&""!==step.dt&&0!=step.dt){var prevStep=0!==j?t_animateSbs__cloneStep(obj_steps[j-1]):{mx:"0",my:"0",sx:"1",sy:"1",op:"1",ro:"0",bl:"0",ea:""};void 0!==step.dt?prevStep.ti=step.dt:prevStep.di=step.dd,obj_steps.splice(j,0,prevStep),j++}}}function t_animateSbs__cloneStep(step){var newStep;return{mx:step.mx,my:step.my,sx:step.sx,sy:step.sy,op:step.op,ro:step.ro,bl:step.bl,ea:step.ea}}function t_animateSbs__recalcStepsStylesDiff(steps){for(var sum_moveX=steps[0].styles.moveX,sum_moveY=steps[0].styles.moveY,sum_rotate=steps[0].styles.rotate,i=1;i<steps.length;i++){var curS=steps[i].styles,prevS=steps[i-1].styles;curS.moveX=curS.moveX-sum_moveX,sum_moveX+=curS.moveX,curS.moveY=curS.moveY-sum_moveY,sum_moveY+=curS.moveY,curS.rotate=curS.rotate-sum_rotate,sum_rotate+=curS.rotate}}function t_animateSbs__getStylesObj(step){var styles={};return styles.moveX=void 0!==step.mx?1*step.mx:0,styles.moveY=void 0!==step.my?1*step.my:0,styles.scaleX=void 0!==step.sx?1*step.sx:1,styles.scaleY=void 0!==step.sy?1*step.sy:1,styles.opacity=void 0!==step.op?1*step.op:1,styles.rotate=void 0!==step.ro?1*step.ro:0,styles.blur=void 0!==step.bl?1*step.bl:0,styles.fix=void 0!==step.fi&&"fixed"===step.fi,styles}function t_animateSbs__getElTrigger(el){var winHeight=$(window).height();el.triggerOffset=$(el).attr("data-animate-sbs-trgofst"),el.triggerOffset=void 0===el.triggerOffset?0:1*el.triggerOffset,"0.5"==el.trigger&&(el.triggerOffset+=winHeight/2,("intoview"===el.animType||"scroll"===el.animType)&&el.triggerOffset>el.topOffset&&el.triggerOffset<=winHeight/2&&(el.triggerOffset=el.topOffset),"blockintoview"===el.animType&&el.triggerOffset>el.blockTopOffset&&el.triggerOffset<=winHeight/2&&(el.triggerOffset=el.blockTopOffset)),"1"==el.trigger&&(el.triggerOffset+=winHeight,("intoview"===el.animType||"scroll"===el.animType)&&el.triggerOffset>el.topOffset&&el.triggerOffset<=winHeight&&(el.triggerOffset=el.topOffset),"blockintoview"===el.animType&&el.triggerOffset>el.blockTopOffset&&el.triggerOffset<=winHeight&&(el.triggerOffset=el.blockTopOffset))}function t_animateSbs__triggerTimeAnim(opts){var els_intoview=opts.els.filter('[data-animate-sbs-event="intoview"], [data-animate-sbs-event="blockintoview"]');t_animateSbs__checkIntoviewEls(opts,els_intoview),$(window).bind("scroll",t_throttle((function(){t_animateSbs__checkIntoviewEls(opts,els_intoview)}),200)),t_animateSbs__onActions__initClick(opts),t_animateSbs__onActions__initHover(opts)}function t_animateSbs__onActions__initClick(opts){var els_click,els_clickTrgs;t_animateSbs__onActions__connectTrgrsWithAnimatedEls(opts.els.filter('[data-animate-sbs-event="click"]'),{},"click"),$(".js-sbs-anim-trigger_click").css("cursor","pointer");var onClickCallback=function(){var els=$(this).data("els-to-animate-on-click"),isStarted;$(window).width()<1200&&(els=els.filter('[data-animate-mobile="y"]')),$(els[0]).hasClass("t-sbs-anim_started")&&!$(els[0]).hasClass("t-sbs-anim_reversed")?t_animateSbs__onActions__end(els):t_animateSbs__onActions__start(els)};$(".js-sbs-anim-trigger_click").off("click",onClickCallback),$(".js-sbs-anim-trigger_click").on("click",onClickCallback)}function t_animateSbs__onActions__initHover(opts){var els_hover,els_hoverTrgs;t_animateSbs__onActions__connectTrgrsWithAnimatedEls(opts.els.filter('[data-animate-sbs-event="hover"]'),{},"hover");var onEnterCallBack=function(){var els;t_animateSbs__onActions__start($(this).data("els-to-animate-on-hover"))},onLeaveCallBack=function(){var els;t_animateSbs__onActions__end($(this).data("els-to-animate-on-hover"))};$(".js-sbs-anim-trigger_hover").off("mouseenter",onEnterCallBack).off("mouseleave",onLeaveCallBack).on("mouseenter",onEnterCallBack).on("mouseleave",onLeaveCallBack)}function t_animateSbs__onActions__connectTrgrsWithAnimatedEls(els,trgElsObj,type){els.each((function(){var el=this,idsStr=el.triggerElems;if(idsStr){var idsArr=idsStr?idsStr.split(","):[],recId=$(el).parents(".t396__artboard").attr("data-artboard-recid");idsArr.forEach((function(id){var elemUniqueId=recId+id,elTrigger=$(".tn-elem__"+recId+id);if(0!==elTrigger.length)if(trgElsObj[elemUniqueId]&&trgElsObj[elemUniqueId].data("els-to-animate-on-"+type)){var elsToTrigger=trgElsObj[elemUniqueId].data("els-to-animate-on-"+type).add(el);trgElsObj[elemUniqueId].data("els-to-animate-on-"+type,elsToTrigger)}else trgElsObj[elemUniqueId]=elTrigger,trgElsObj[elemUniqueId].addClass("js-sbs-anim-trigger_"+type).data("els-to-animate-on-"+type,$(el))}))}else{var selfTriggerNode;$(el).find(".tn-atom__sbs-anim-wrapper").data("els-to-animate-on-"+type,$(el)).addClass("js-sbs-anim-trigger_"+type)}}))}function t_animateSbs__onActions__start(els){els.each((function(){var el=$(this);el.hasClass("t-sbs-anim_playing")?el.data("planned-dir","play"):t_animateSbs__onActions__play(el)}))}function t_animateSbs__onActions__end(els){els.each((function(){var el=$(this);if("loop"===el.attr("data-animate-sbs-loop"))el.on("animationiteration",(function reverseOnAnimIteration(){el.removeClass("t-sbs-anim_started t-sbs-anim_playing"),el.off("animationiteration",reverseOnAnimIteration)}));else{if(el.hasClass("t-sbs-anim_playing"))return void el.data("planned-dir","reverse");t_animateSbs__onActions__playReverse(el)}}))}function t_animateSbs__onActions__onAnimationEnd(el){var depAnimCallback=function(){el.removeClass("t-sbs-anim_playing"),el.off("animationend",el.data("callback-dep-anim")),el.data("planned-dir")&&"play"===el.data("planned-dir")&&el.hasClass("t-sbs-anim_reversed")?t_animateSbs__onActions__play(el):el.data("planned-dir")&&"reverse"===el.data("planned-dir")&&!el.hasClass("t-sbs-anim_reversed")&&t_animateSbs__onActions__playReverse(el),el.data("planned-dir","")};el.off("animationend",depAnimCallback),el.on("animationend",depAnimCallback),el.data("callback-dep-anim",depAnimCallback)}function t_animateSbs__getAnimationTime(el){for(var animateSbsOpts=JSON.parse(el.data().animateSbsOpts.split("'").join('"')),time=0,i=0;i<animateSbsOpts.length;i++){var element=animateSbsOpts[i];time+=parseInt(element.ti)}return time}function t_animateSbs__onActions__play(el){el.removeClass("t-sbs-anim_started t-sbs-anim_reversed"),t_animateSbs__forceRepaint(el[0]);var animTime=t_animateSbs__getAnimationTime(el);el.addClass("t-sbs-anim_started"+(animTime>0?" t-sbs-anim_playing":"")),t_animateSbs__onActions__onAnimationEnd(el)}function t_animateSbs__onActions__playReverse(el){el.removeClass("t-sbs-anim_started"),t_animateSbs__forceRepaint(el[0]);var animTime=t_animateSbs__getAnimationTime(el);el.addClass("t-sbs-anim_started t-sbs-anim_reversed"+(animTime>0?" t-sbs-anim_playing":"")),t_animateSbs__onActions__onAnimationEnd(el)}function t_animateSbs__forceRepaint(el){el.offsetWidth}function t_animateSbs__checkIntoviewEls(opts,els_intoview){if(0!==els_intoview.length){opts.scrollTop=window.pageYOffset;for(var i=0;i<els_intoview.length;i++){var el=els_intoview[i],trigger=opts.scrollTop+el.triggerOffset;if("blockintoview"===el.animType)var isAfterStart=trigger>=el.blockTopOffset;else var isAfterStart=trigger>=el.topOffset;isAfterStart&&!1===$(el).hasClass("t-sbs-anim_started")&&($(el).addClass("t-sbs-anim_started"),els_intoview.splice(i,1),i--)}}}function t_animateParallax__checkOldIE(){var sAgent=window.navigator.userAgent,Idx=sAgent.indexOf("MSIE"),ieVersion="",oldIE=!1;return Idx>0&&(8!=(ieVersion=parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx))))&&9!=ieVersion||(oldIE=!0)),oldIE}function t_animateSbs__wrapAtomEls(){var wrappingEls;$("[data-animate-sbs-event]").each((function(){var el_atom=$(this).find(".tn-atom");0==el_atom.parents(".tn-atom__sbs-anim-wrapper").length&&el_atom.wrap("<div class='tn-atom__sbs-anim-wrapper' style='display:table; width:inherit; height:inherit;'></div>")}))}function t_animateSbs__cashElsInfo(opts){var els=opts.els;opts.triggerElemsAttrName="edit"===opts.mode?"data-field-sbstrgels-value":"data-animate-sbs-trgels";for(var i=0;i<els.length;i++){var el=els[i];el.state="unactive",el.animType="edit"===opts.mode?$(el).attr("data-field-sbsevent-value"):$(el).attr("data-animate-sbs-event"),el.changeType="scroll"===el.animType?"scroll":"time",el.trigger="edit"===opts.mode?$(el).attr("data-field-sbstrg-value"):$(el).attr("data-animate-sbs-trg"),el.trigger=void 0===el.trigger?1:el.trigger,el.triggerElems=$(el).attr(opts.triggerElemsAttrName),el.wrapperEl=$(el).find(".tn-atom__sbs-anim-wrapper"),el.steps=[];var str_opts="edit"===opts.mode?$(el).attr("data-field-sbsopts-value"):$(el).attr("data-animate-sbs-opts");if(void 0!==str_opts){-1!=str_opts.indexOf("fixed")&&(el.zIndexVal=window.getComputedStyle(el).getPropertyValue("z-index")),str_opts=str_opts.replace(/'/g,'"');var obj_steps=JSON.parse(str_opts);t_animateSbs__addDelayStepsToStepsArr(obj_steps),el.loop="edit"===opts.mode?$(el).attr("data-field-sbsloop-value"):$(el).attr("data-animate-sbs-loop"),t_animateSbs__cashElsTopOffset(el,opts);for(var totalUnfixedDist=0,j=0;j<obj_steps.length;j++){var curStep={state:"unactive"};curStep.styles=t_animateSbs__getStylesObj(obj_steps[j]),"scroll"==el.changeType?(curStep.prevUnfixedDist=totalUnfixedDist,curStep.dist=obj_steps[j].di,!1===curStep.styles.fix&&(totalUnfixedDist+=Number(curStep.dist)),curStep.start=0==j?el.topOffset:el.steps[j-1].end,curStep.end=curStep.start+1*curStep.dist):(curStep.time=obj_steps[j].ti,curStep.ease=obj_steps[j].ea),el.steps.push(curStep)}t_animateSbs__updateInfoOnImgLoad(el,opts),t_animateSbs__recalcStepsStylesDiff(el.steps)}}}function t_animateSbs__reset(opts){for(var els=opts.els,i=0;i<els.length;i++){var type=els[i].animType;if("intoview"===type||"blockintoview"===type||"click"===type||"hover"===type)$(els[i]).removeClass("t-sbs-anim_started"),$(els[i]).find(".tn-atom__sbs-anim-wrapper").css("opacity","");else{els[i].state="reseted";var atomAnimWrapper=els[i].wrapperEl;$(atomAnimWrapper).css({transform:"",position:"",top:"",opacity:""})}}}function t_animateSbs__onFuncLoad(funcName,okFunc,time){"function"==typeof window[funcName]?okFunc():setTimeout((function checkFuncExist(){if("function"!=typeof window[funcName]){if("complete"===document.readyState&&"function"!=typeof window[funcName])throw new Error(funcName+" is undefined");setTimeout(checkFuncExist,time||100)}else okFunc()}))}$(document).ready((function(){1==window.isSearchBot||t_animateParallax__checkOldIE()||"edit"==$(".t-records").attr("data-tilda-mode")||($('[data-animate-sbs-event="scroll"]').length>0&&$(".t-records#allrecords").css("overflow-x","hidden"),t_animateSbs__wrapAnimatedAtomEls(),setTimeout((function(){t_animateSbs__initAllRes()}),50))}));